<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smithsonian Art Prints | Museum Quality Reproductions</title>
  
  <!-- Snipcart Integration -->
  <link rel="preconnect" href="https://app.snipcart.com">
  <link rel="preconnect" href="https://cdn.snipcart.com">
  <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.2.0/default/snipcart.css" />
  
  <!-- ============================================
       CSS STYLES
       ============================================ -->
  <style>
    /* ----------------------------------------
       RESET & BASE
       ---------------------------------------- */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body { 
      font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, Roboto, sans-serif; 
      background: #ffffff;
      color: #222222;
      line-height: 1.4;
    }
    
    /* ----------------------------------------
       HEADER
       - Sticky header with logo, search, cart
       - z-index: 1 (very low, below Snipcart)
       ---------------------------------------- */
    .store-header {
      background: #ffffff;
      border-bottom: 1px solid #e1e3df;
      padding: 20px 0;
      position: sticky;
      top: 0;
      z-index: 1; /* Very low z-index */
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .header-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    .store-branding {
      text-align: center;
    }
    
    .store-logo {
      font-size: 35px;
      font-weight: 400;
      color: #f1651f;
      text-decoration: none;
      display: block;
      margin-bottom: 5px;
      cursor: pointer;
    }
    
    .store-tagline {
      font-size: 14px;
      color: #757575;
      font-style: italic;
    }
    
    /* ----------------------------------------
       SEARCH CONTROLS
       - Search input, artist dropdown, max items
       ---------------------------------------- */
    .search-controls {
      display: flex;
      gap: 15px;
      align-items: flex-end;
      flex-wrap: wrap;
      justify-content: center;
      flex: 1;
      max-width: 800px;
    }
    
    .input-group {
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 120px;
    }
    
    .input-label {
      margin-bottom: 5px;
      font-weight: 600;
      color: #222222;
      font-size: 13px;
    }
    
    .search-input, .artist-select, .max-items-input {
      padding: 10px 15px;
      border: 2px solid #222222;
      border-radius: 24px;
      font-size: 14px;
      outline: none;
      text-align: center;
    }
    
    .search-input {
      min-width: 250px;
      text-align: left;
      padding-left: 15px;
    }
    
    .search-input:focus, .artist-select:focus, .max-items-input:focus {
      border-color: #f1651f;
    }
    
    .artist-select {
      min-width: 200px;
      cursor: pointer;
      background: white;
    }
    
    .max-items-input {
      width: 80px;
    }
    
    /* ----------------------------------------
       CART BUTTON
       ---------------------------------------- */
    .cart-button {
      background: #f1651f;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 24px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      position: relative;
      transition: all 0.2s ease;
    }
    
    .cart-button:hover {
      background: #e55a00;
      transform: translateY(-1px);
    }
    
    .cart-count {
      background: white;
      color: #f1651f;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 11px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }
    
    /* ----------------------------------------
       BREADCRUMB NAVIGATION
       - Shows on product page only
       ---------------------------------------- */
    .breadcrumb-nav {
      background: #f8f9fa;
      padding: 12px 0;
      border-bottom: 1px solid #e1e3df;
      font-size: 13px;
    }
    
    .breadcrumb-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 24px;
    }
    
    .breadcrumb-container a {
      color: #f1651f;
      text-decoration: none;
    }
    
    .breadcrumb-container a:hover {
      text-decoration: underline;
    }
    
    /* ----------------------------------------
       STATUS SECTION
       - Shows loading state and result counts
       ---------------------------------------- */
    .status-section {
      background: #f8f9fa;
      padding: 20px 0;
      border-bottom: 1px solid #e1e3df;
    }
    
    .status-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 24px;
      text-align: center;
    }
    
    #status {
      font-size: 14px;
      color: #222222;
      margin-bottom: 10px;
    }
    
    .loading {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid #f1651f;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 8px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .stats {
      font-size: 13px;
      color: #757575;
    }
    
    /* ----------------------------------------
       MAIN CONTENT CONTAINER
       ---------------------------------------- */
    .main-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 24px;
    }
    
    /* ----------------------------------------
       SHOP PAGE - PRODUCT GRID
       - Grid of product cards
       - Toggled via .hidden class
       ---------------------------------------- */
    .shop-page {
      display: block;
    }
    
    .shop-page.hidden {
      display: none;
    }
    
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    /* ----------------------------------------
       PRODUCT CARD
       - Individual card in the grid
       - Clickable to open product page
       ---------------------------------------- */
    .product-card {
      background: #ffffff;
      border-radius: 8px;
      overflow: hidden;
      transition: all 0.2s ease;
      cursor: pointer;
      position: relative;
      border: 1px solid #f0f0f0;
      opacity: 0;
      animation: fadeInUp 0.4s ease-out forwards;
    }
    
    .product-card:nth-child(odd) {
      animation-delay: 0.1s;
    }
    
    .product-card:nth-child(even) {
      animation-delay: 0.2s;
    }
    
    .product-card:hover {
      box-shadow: 0 4px 12px rgba(34, 34, 34, 0.15);
      transform: translateY(-2px);
    }
    
    .product-image-container {
      position: relative;
      width: 100%;
      height: 250px;
      overflow: hidden;
      background: #f7f7f7;
    }
    
    .product-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.2s ease;
    }
    
    .product-card:hover .product-image {
      transform: scale(1.05);
    }
    
    .museum-badge {
      position: absolute;
      top: 8px;
      left: 8px;
      background: rgba(34, 34, 34, 0.9);
      color: white;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: 600;
    }
    
    .favorite-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      background: rgba(255, 255, 255, 0.9);
      border: none;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.2s ease;
    }
    
    .favorite-btn:hover {
      background: white;
      color: #f1651f;
    }
    
    .product-info {
      padding: 16px;
    }
    
    .product-title {
      font-size: 13px;
      color: #222222;
      margin-bottom: 4px;
      line-height: 1.3;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      font-weight: 500;
    }
    
    .product-artist {
      font-size: 12px;
      color: #757575;
      margin-bottom: 8px;
    }
    
    .product-rating {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-bottom: 8px;
    }
    
    .stars {
      color: #f1651f;
      font-size: 12px;
    }
    
    .rating-count {
      font-size: 12px;
      color: #757575;
    }
    
    .product-pricing {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }
    
    .current-price {
      font-size: 16px;
      font-weight: 600;
      color: #222222;
    }
    
    .original-price {
      font-size: 14px;
      color: #757575;
      text-decoration: line-through;
    }
    
    .discount {
      background: #f1651f;
      color: white;
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 600;
    }
    
    .quick-add {
      width: 100%;
      background: #222222;
      color: white;
      border: none;
      padding: 8px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-top: 8px;
    }
    
    .quick-add:hover {
      background: #000000;
    }
    
    /* ----------------------------------------
       SINGLE PRODUCT PAGE
       - Detail view with image, options, cart
       - Toggled via .active class
       ---------------------------------------- */
    .product-page {
      display: none;
    }
    
    .product-page.active {
      display: block;
    }
    
    .product-detail-grid {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 40px;
      margin-bottom: 40px;
    }
    
    .product-gallery {
      background: #f7f7f7;
      border-radius: 8px;
      overflow: hidden;
    }
    
    .main-product-image {
      width: 100%;
      height: 500px;
      object-fit: contain;
      background: white;
      cursor: pointer;
    }
    
    .product-details {
      background: white;
      padding: 32px;
      border-radius: 8px;
      border: 1px solid #f0f0f0;
    }
    
    .detail-breadcrumb {
      font-size: 12px;
      color: #757575;
      margin-bottom: 16px;
    }
    
    .detail-title {
      font-size: 28px;
      font-weight: 400;
      color: #222222;
      margin-bottom: 8px;
      line-height: 1.3;
    }
    
    .detail-artist {
      font-size: 18px;
      color: #757575;
      margin-bottom: 16px;
    }
    
    .detail-rating {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 20px;
    }
    
    .detail-rating .stars {
      font-size: 16px;
    }
    
    .detail-rating .rating-text {
      font-size: 14px;
      color: #757575;
    }
    
    .detail-pricing {
      margin-bottom: 24px;
      padding-bottom: 24px;
      border-bottom: 1px solid #f0f0f0;
    }
    
    .detail-current-price {
      font-size: 32px;
      font-weight: 600;
      color: #222222;
      display: block;
      margin-bottom: 8px;
    }
    
    .price-note {
      font-size: 13px;
      color: #757575;
    }
    
    /* ----------------------------------------
       PRODUCT OPTIONS
       - Size and frame selection dropdowns
       ---------------------------------------- */
    .product-options {
      margin-bottom: 24px;
    }
    
    .option-group {
      margin-bottom: 20px;
    }
    
    .option-label {
      font-size: 14px;
      color: #222222;
      margin-bottom: 8px;
      font-weight: 600;
      display: block;
    }
    
    .option-select {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #b9b9b9;
      border-radius: 6px;
      font-size: 14px;
      background: white;
      cursor: pointer;
    }
    
    .option-select:focus {
      outline: none;
      border-color: #f1651f;
    }
    
    .price-display {
      background: #f8f9fa;
      padding: 16px;
      border-radius: 8px;
      margin: 20px 0;
      text-align: center;
    }
    
    .price-display .total-price {
      font-size: 24px;
      font-weight: 600;
      color: #222222;
    }
    
    /* ----------------------------------------
       ADD TO CART BUTTON
       - Becomes active when options selected
       - Gets snipcart-add-item class dynamically
       ---------------------------------------- */
    .add-to-cart-btn {
      width: 100%;
      background: #222222;
      color: white;
      border: none;
      padding: 16px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-bottom: 16px;
    }
    
    .add-to-cart-btn:hover:not(:disabled) {
      background: #000000;
    }
    
    .add-to-cart-btn:disabled {
      background: #b9b9b9;
      cursor: not-allowed;
    }
    
    .shipping-info {
      font-size: 13px;
      color: #757575;
      margin-bottom: 24px;
      padding-bottom: 24px;
      border-bottom: 1px solid #f0f0f0;
    }
    
    .shipping-info strong {
      color: #222222;
    }
    
    /* ----------------------------------------
       ITEM DETAILS DROPDOWN
       - Expandable section with artwork metadata
       ---------------------------------------- */
    .details-section {
      margin-top: 24px;
    }
    
    .details-toggle {
      width: 100%;
      background: none;
      border: none;
      padding: 16px 0;
      font-size: 16px;
      font-weight: 600;
      color: #222222;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #f0f0f0;
    }
    
    .details-toggle:hover {
      color: #f1651f;
    }
    
    .details-content {
      padding: 16px 0;
      font-size: 14px;
      line-height: 1.6;
      color: #222222;
      display: none;
    }
    
    .details-content.expanded {
      display: block;
    }
    
    .details-content p {
      margin-bottom: 12px;
    }
    
    .details-content strong {
      font-weight: 600;
    }
    
    /* ----------------------------------------
       IMAGE LIGHTBOX
       - Full-screen image viewer
       - z-index: 999999 (high, but below Snipcart)
       ---------------------------------------- */
    .image-lightbox {
      display: none;
      position: fixed;
      z-index: 999999; /* Very high but still below Snipcart */
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      animation: fadeIn 0.3s ease;
    }

    .image-lightbox.active {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .lightbox-image {
      max-width: 90%;
      max-height: 90%;
      object-fit: contain;
    }

    .lightbox-close {
      position: absolute;
      top: 20px;
      right: 30px;
      color: white;
      font-size: 40px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 10;
    }

    .lightbox-close:hover {
      color: #f1651f;
      transform: scale(1.1);
    }
    
    /* ----------------------------------------
       EMPTY STATE
       - Shown when no results found
       ---------------------------------------- */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #757575;
    }
    
    .empty-state h3 {
      color: #222222;
      margin-bottom: 12px;
      font-weight: 400;
    }
    
    /* ----------------------------------------
       FOOTER
       ---------------------------------------- */
    .professional-footer {
      background: #f8f9fa;
      text-align: center;
      margin-top: 60px;
      padding: 40px 24px;
      border-top: 1px solid #e1e3df;
    }
    
    .footer-content {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .footer-title {
      font-size: 18px;
      color: #222222;
      margin-bottom: 12px;
      font-weight: 600;
    }
    
    .footer-text {
      font-size: 14px;
      color: #757575;
      line-height: 1.6;
      margin-bottom: 8px;
    }
    
    /* ----------------------------------------
       RESPONSIVE DESIGN
       ---------------------------------------- */
    @media (max-width: 768px) {
      .header-container {
        flex-direction: column;
        text-align: center;
        gap: 16px;
      }
      
      .search-controls {
        flex-direction: column;
        gap: 12px;
        width: 100%;
      }
      
      .input-group {
        width: 100%;
      }
      
      .search-input, .artist-select {
        width: 100%;
        max-width: 300px;
      }
      
      .main-content {
        padding: 16px;
      }
      
      .products-grid {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 12px;
      }
      
      .product-image-container {
        height: 160px;
      }
      
      .product-info {
        padding: 12px;
      }
      
      .product-detail-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      
      .main-product-image {
        height: 300px;
      }
      
      .product-details {
        padding: 20px;
      }
      
      .detail-title {
        font-size: 22px;
      }
      
      .detail-current-price {
        font-size: 24px;
      }
    }
    
    /* ----------------------------------------
       ANIMATIONS
       ---------------------------------------- */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>

  <!-- ============================================
       HTML STRUCTURE
       ============================================ -->

  <!-- ----------------------------------------
       HEADER
       - Logo (click to go home)
       - Search controls
       - Cart button (Snipcart trigger)
       ---------------------------------------- -->
  <header class="store-header">
    <div class="header-container">
      <div class="store-branding">
        <a href="#" class="store-logo" onclick="showShop()">Smithsonian</a>
        <p class="store-tagline">Museum Quality Art Prints</p>
      </div>
      
      <div class="search-controls">
        <div class="input-group">
          <label class="input-label" for="searchQuery">Search Collection:</label>
          <input type="text" class="search-input" id="searchQuery" placeholder="e.g. landscape, portrait, sculpture..." onkeypress="if(event.key==='Enter') fetchArtworks()" oninput="fetchArtworks()">
        </div>
        
        <div class="input-group">
          <label class="input-label" for="artistSelect">Famous Artists:</label>
          <select class="artist-select" id="artistSelect" onchange="fillSearchFromArtist()">
            <option value="">-- Select Artist --</option>
            <option value="Georgia O'Keeffe">Georgia O'Keeffe</option>
            <option value="Edward Hopper">Edward Hopper</option>
            <option value="Winslow Homer">Winslow Homer</option>
            <option value="Mary Cassatt">Mary Cassatt</option>
            <option value="John Singer Sargent">John Singer Sargent</option>
            <option value="Jackson Pollock">Jackson Pollock</option>
            <option value="Grant Wood">Grant Wood</option>
            <option value="Norman Rockwell">Norman Rockwell</option>
            <option value="Willem de Kooning">Willem de Kooning</option>
            <option value="Jasper Johns">Jasper Johns</option>
            <option value="Robert Rauschenberg">Robert Rauschenberg</option>
            <option value="Andy Warhol">Andy Warhol</option>
            <option value="Helen Frankenthaler">Helen Frankenthaler</option>
            <option value="Mark Rothko">Mark Rothko</option>
            <option value="Thomas Hart Benton">Thomas Hart Benton</option>
            <option value="David Hockney">David Hockney</option>
            <option value="Roy Lichtenstein">Roy Lichtenstein</option>
            <option value="Jean-Michel Basquiat">Jean-Michel Basquiat</option>
            <option value="Frederic Remington">Frederic Remington</option>
            <option value="Thomas Cole">Thomas Cole</option>
            <option value="clear">-- Clear Search --</option>
          </select>
        </div>
        
        <div class="input-group">
          <label class="input-label" for="maxItems">Max Items:</label>
          <input type="number" class="max-items-input" id="maxItems" value="20" min="1" max="50">
        </div>
      </div>
      
      <!-- Cart Button - Opens Snipcart slide-out -->
      <button type="button" class="cart-button snipcart-checkout">
        ðŸ›’ Cart
        <span class="cart-count snipcart-items-count">0</span>
      </button>
    </div>
  </header>

  <!-- ----------------------------------------
       BREADCRUMB NAVIGATION
       - Hidden by default
       - Shown on product page
       ---------------------------------------- -->
  <nav class="breadcrumb-nav" id="breadcrumbNav" style="display: none;">
    <div class="breadcrumb-container">
      <span id="breadcrumbContent"></span>
    </div>
  </nav>

  <!-- ----------------------------------------
       STATUS SECTION
       - Shows loading spinner
       - Shows result count after load
       ---------------------------------------- -->
  <section class="status-section">
    <div class="status-container">
      <div id="status">Loading featured artworks...</div>
      <div class="stats" id="stats" style="display: none;">
        <strong>Collection:</strong> <span id="totalCount">0</span> artworks available as prints
      </div>
    </div>
  </section>

  <!-- ----------------------------------------
       MAIN CONTENT
       Contains both shop page and product page
       Only one is visible at a time
       ---------------------------------------- -->
  <main class="main-content">
    
    <!-- SHOP PAGE - Product Grid -->
    <div class="shop-page" id="shopPage">
      <div class="products-grid" id="gallery">
        <div class="empty-state">
          <div class="loading"></div>
          <h3>Loading Collection</h3>
          <p>Discovering museum-quality art prints from the Smithsonian American Art Museum...</p>
        </div>
      </div>
    </div>

    <!-- PRODUCT PAGE - Single Product Detail View -->
    <div class="product-page" id="productPage">
      <div class="product-detail-grid">
        <!-- Left: Product Image -->
        <div class="product-gallery">
          <img id="mainProductImage" class="main-product-image" src="" alt="" onclick="openImageLightbox()">
        </div>
        
        <!-- Right: Product Details & Options -->
        <div class="product-details">
          <div class="detail-breadcrumb" id="detailBreadcrumb"></div>
          
          <h1 class="detail-title" id="detailTitle"></h1>
          <p class="detail-artist" id="detailArtist"></p>
          
          <div class="detail-rating">
            <span class="stars">â˜…â˜…â˜…â˜…â˜…</span>
            <span class="rating-text">(4.7) 607 reviews</span>
          </div>
          
          <div class="detail-pricing">
            <span class="detail-current-price" id="detailPrice">Select options to see price</span>
            <p class="price-note">Museum quality prints professionally produced on archival paper</p>
          </div>
          
          <!-- Product Options -->
          <div class="product-options">
            <div class="option-group">
              <label class="option-label" for="sizeSelect">Size</label>
              <select class="option-select" id="sizeSelect" onchange="updatePrice()">
                <option value="">Select size</option>
                <option value="standard">Standard Print (11" Ã— 14") - $49.99</option>
                <option value="large">Large Print (16" Ã— 20") - $79.99</option>
              </select>
            </div>
            
            <div class="option-group">
              <label class="option-label" for="frameSelect">Frame Option</label>
              <select class="option-select" id="frameSelect" onchange="updatePrice()">
                <option value="">Select frame option</option>
                <option value="none">No Frame - Included</option>
                <option value="black">Black Frame - Add $29.99</option>
                <option value="white">White Frame - Add $29.99</option>
                <option value="wood">Wood Frame - Add $49.99</option>
              </select>
            </div>
          </div>
          
          <!-- Dynamic Price Display -->
          <div class="price-display" id="priceDisplay" style="display: none;">
            <div class="total-price" id="totalPrice">$0.00</div>
          </div>
          
          <!-- Add to Cart Button -->
          <!-- NOTE: snipcart-add-item class is added dynamically when options are selected -->
          <button type="button" class="add-to-cart-btn" id="productAddToCartBtn" disabled>
            Select options above
          </button>
          
          <div class="shipping-info">
            <p><strong>âœ“ Free shipping</strong> on orders over $50</p>
            <p>Ships from North Carolina</p>
            <p>Arrives in 3-5 business days</p>
          </div>
          
          <!-- Expandable Item Details -->
          <div class="details-section">
            <button class="details-toggle" onclick="toggleDetails()">
              Item Details
              <span id="detailsArrow">â–¼</span>
            </button>
            <div class="details-content" id="detailsContent">
              <!-- Content populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- ----------------------------------------
       IMAGE LIGHTBOX
       - Full-screen image viewer
       - Activated by clicking product image
       ---------------------------------------- -->
  <div class="image-lightbox" id="imageLightbox" onclick="closeImageLightbox(event)">
    <span class="lightbox-close" onclick="closeImageLightbox()">&times;</span>
    <img class="lightbox-image" id="lightboxImage" src="" alt="">
  </div>

  <!-- ----------------------------------------
       FOOTER
       ---------------------------------------- -->
  <footer class="professional-footer">
    <div class="footer-content">
      <h3 class="footer-title">Museum Quality Art Prints</h3>
      <p class="footer-text">Every print is professionally produced using archival-quality materials and museum-grade inks.</p>
      <p class="footer-text">Our collection features authentic reproductions from the Smithsonian American Art Museum.</p>
    </div>
  </footer>

  <!-- ============================================
       SNIPCART CONFIGURATION
       - data-api-key: Your Snipcart public API key
       - data-config-modal-style: "side" = slide-out cart
       ============================================ -->
  <div hidden id="snipcart" 
       data-api-key="YTNhNTA0OWQtMjQ4NS00MTg0LWI0NjYtNTdiNTM5NmYxOTE1NjM4ODgyMjg4ODE0ODkwMzUw" 
       data-config-modal-style="side"
       data-currency="usd">
  </div>
  <script async src="https://cdn.snipcart.com/themes/v3.2.0/default/snipcart.js"></script>

  <!-- ============================================
       JAVASCRIPT
       ============================================ -->
  <script>
    // ============================================
    // CONFIGURATION
    // ============================================
    const API_KEY = "QnuHEMMJkmn5ic4UvtN6aIR4wfTO2GgjOzMpoBIJ";
    const BASE_URL = "https://api.si.edu/openaccess/api/v1.0/search";

    // ============================================
    // STATE MANAGEMENT
    // - artworksData: Array of all fetched artwork objects
    // - artworkCounter: Used to generate IDs (BUG: resets on each search!)
    // - currentSearchTerm: Last search term used
    // - currentProduct: Currently viewed product on detail page
    // - searchTimeout: Debounce timer for search input
    // ============================================
    let artworksData = [];
    let artworkCounter = 0;
    let currentSearchTerm = "";
    let currentProduct = null;
    let searchTimeout = null;

    // ============================================
    // ROUTING
    // Hash-based routing for single-page app
    // - #product/{id} -> Product detail page
    // - # or empty -> Shop page (product grid)
    // 
    // IMPORTANT: Router ignores hash changes when Snipcart
    // is active to prevent interfering with checkout flow.
    // ============================================
    
    /**
     * Check if Snipcart cart/checkout is currently active
     * Used to prevent router from interfering with Snipcart
     * @returns {boolean} True if Snipcart is open
     */
    function isSnipcartActive() {
      // Method 1: Check Snipcart's internal state
      if (typeof Snipcart !== 'undefined' && Snipcart.store) {
        try {
          const state = Snipcart.store.getState();
          if (state.cart && state.cart.opened) {
            console.log('ðŸ›’ Snipcart is open (state check)');
            return true;
          }
        } catch (e) {
          // Snipcart not fully initialized, check DOM instead
        }
      }
      
      // Method 2: Check for Snipcart's DOM elements (backup)
      const snipcartModal = document.querySelector('.snipcart-modal__container');
      const snipcartOverlay = document.querySelector('.snipcart-overlay');
      const snipcartCart = document.querySelector('.snipcart-cart__content');
      
      if (snipcartModal || snipcartOverlay || snipcartCart) {
        console.log('ðŸ›’ Snipcart is open (DOM check)');
        return true;
      }
      
      return false;
    }

    /**
     * Initialize router - attach hash change listener
     */
    function initRouter() {
      window.addEventListener('hashchange', handleRoute);
      handleRoute(); // Handle initial route
    }

    /**
     * Handle route changes based on URL hash
     * Called on: page load, hash change
     * 
     * IMPORTANT: Skips processing if Snipcart is active
     * to prevent closing cart during checkout flow.
     */
    function handleRoute() {
      // Don't interfere with Snipcart!
      if (isSnipcartActive()) {
        console.log('ðŸ›’ Router: Ignoring hash change - Snipcart is active');
        return;
      }
      
      const hash = window.location.hash;
      
      if (hash.startsWith('#product/')) {
        const productId = hash.replace('#product/', '');
        showProduct(productId);
      } else {
        showShop();
      }
    }

    /**
     * Show the shop page (product grid)
     * Hides product page, clears hash
     */
    function showShop() {
      document.getElementById('shopPage').classList.remove('hidden');
      document.getElementById('productPage').classList.remove('active');
      document.getElementById('breadcrumbNav').style.display = 'none';
      window.location.hash = '';
    }

    /**
     * Show a specific product detail page
     * @param {string} productId - The artwork ID (e.g., "artwork_0")
     */
    function showProduct(productId) {
      const artwork = artworksData.find(art => art.id === productId);
      if (!artwork) {
        showShop();
        return;
      }

      currentProduct = artwork;
      document.getElementById('shopPage').classList.add('hidden');
      document.getElementById('productPage').classList.add('active');
      
      // Update breadcrumb
      document.getElementById('breadcrumbNav').style.display = 'block';
      document.getElementById('breadcrumbContent').innerHTML = `
        <a href="#" onclick="showShop()">Home</a> â€º 
        <a href="#" onclick="showShop()">Art Prints</a> â€º 
        ${artwork.artist} â€º ${artwork.title}
      `;
      
      populateProductPage(artwork);
    }

    // ============================================
    // PRODUCT PAGE DISPLAY
    // Functions for rendering product detail page
    // ============================================
    
    /**
     * Populate the product detail page with artwork data
     * Resets all options and price display
     * @param {Object} artwork - The artwork object
     */
    function populateProductPage(artwork) {
      document.getElementById('mainProductImage').src = artwork.highResImage || artwork.image;
      document.getElementById('mainProductImage').alt = artwork.title;
      document.getElementById('detailBreadcrumb').textContent = `${artwork.museum}`;
      document.getElementById('detailTitle').textContent = artwork.title;
      document.getElementById('detailArtist').textContent = `by ${artwork.artist}`;
      
      // FORCE RESET everything
      document.getElementById('sizeSelect').value = '';
      document.getElementById('frameSelect').value = '';
      document.getElementById('priceDisplay').style.display = 'none';
      document.getElementById('detailPrice').textContent = 'Select options to see price';
      
      const addToCartBtn = document.getElementById('productAddToCartBtn');
      addToCartBtn.disabled = true;
      addToCartBtn.textContent = 'Select options above';
      addToCartBtn.className = 'add-to-cart-btn'; // Remove snipcart class
      
      // COMPLETELY CLEAR all Snipcart attributes
      const attrs = ['data-item-id', 'data-item-name', 'data-item-price', 'data-item-url', 'data-item-description', 'data-item-image', 'data-item-custom1-name', 'data-item-custom1-value', 'data-item-custom2-name', 'data-item-custom2-value', 'data-item-custom3-name', 'data-item-custom3-value'];
      attrs.forEach(attr => addToCartBtn.removeAttribute(attr));
      
      // Populate details section
      let details = [];
      if (artwork.year_created) details.push(`<p><strong>Date Created:</strong> ${artwork.year_created}</p>`);
      if (artwork.medium) details.push(`<p><strong>Medium:</strong> ${artwork.medium}</p>`);
      if (artwork.dimensions) details.push(`<p><strong>Dimensions:</strong> ${artwork.dimensions}</p>`);
      if (artwork.object_type) details.push(`<p><strong>Object Type:</strong> ${artwork.object_type}</p>`);
      if (artwork.accession_number) details.push(`<p><strong>Accession Number:</strong> ${artwork.accession_number}</p>`);
      if (artwork.credit_line) details.push(`<p><strong>Credit Line:</strong> ${artwork.credit_line}</p>`);
      if (artwork.description && artwork.description !== `Museum quality print of ${artwork.title} by ${artwork.artist}`) {
        details.push(`<p><strong>Description:</strong> ${artwork.description}</p>`);
      }
      details.push(`<p><strong>Collection:</strong> ${artwork.museum}, ${artwork.location}</p>`);
      details.push(`<p><strong>Print Quality:</strong> Museum-grade archival paper with professional inks</p>`);
      details.push(`<p><strong>Framing:</strong> Professional matting and framing available</p>`);
      details.push(`<p><a href="${artwork.api_url}" target="_blank" style="color: #f1651f; text-decoration: none;">View Original at Smithsonian â†’</a></p>`);
      
      document.getElementById('detailsContent').innerHTML = details.join('');
    }

    // ============================================
    // PRICE & CART INTEGRATION
    // Calculate price based on options
    // Set up Snipcart data attributes for cart
    // ============================================
    
    /**
     * Update price display and configure Snipcart button
     * Called when size or frame option changes
     * 
     * Pricing:
     * - Standard (11x14): $49.99
     * - Large (16x20): $79.99
     * - No frame: +$0
     * - Black/White frame: +$29.99
     * - Wood frame: +$49.99
     */
    function updatePrice() {
      if (!currentProduct) return;
      
      const sizeSelect = document.getElementById('sizeSelect');
      const frameSelect = document.getElementById('frameSelect');
      const priceDisplay = document.getElementById('priceDisplay');
      const totalPriceEl = document.getElementById('totalPrice');
      const addToCartBtn = document.getElementById('productAddToCartBtn');
      
      if (sizeSelect.value && frameSelect.value) {
        // Calculate price
        const basePrice = sizeSelect.value === 'standard' ? 49.99 : 79.99;
        const framePrice = frameSelect.value === 'none' ? 0 : 
                           frameSelect.value === 'wood' ? 49.99 : 29.99;
        const totalPrice = basePrice + framePrice;
        
        // Show price
        priceDisplay.style.display = 'block';
        totalPriceEl.textContent = `$${totalPrice.toFixed(2)}`;
        
        // Enable button and ADD snipcart class
        addToCartBtn.disabled = false;
        addToCartBtn.className = 'add-to-cart-btn snipcart-add-item'; // Add snipcart class
        addToCartBtn.textContent = `Add to cart - ${totalPrice.toFixed(2)}`;
        
        // Set up Snipcart attributes
        const sizeName = sizeSelect.value === 'standard' ? '11" Ã— 14"' : '16" Ã— 20"';
        const frameName = frameSelect.options[frameSelect.selectedIndex].text.split(' - ')[0];
        const uniqueId = currentProduct.smithsonian_id + '-' + sizeSelect.value + '-' + frameSelect.value;
        
        // Set Snipcart data attributes
        addToCartBtn.setAttribute('data-item-id', uniqueId);
        addToCartBtn.setAttribute('data-item-name', currentProduct.title + ' (' + sizeName + ')');
        addToCartBtn.setAttribute('data-item-price', totalPrice.toFixed(2));
        addToCartBtn.setAttribute('data-item-description', `${currentProduct.title} by ${currentProduct.artist} - Museum quality print`);
        addToCartBtn.setAttribute('data-item-image', currentProduct.image);
        addToCartBtn.setAttribute('data-item-url', window.location.href);
        addToCartBtn.setAttribute('data-item-custom1-name', 'Size');
        addToCartBtn.setAttribute('data-item-custom1-value', sizeName);
        addToCartBtn.setAttribute('data-item-custom2-name', 'Frame');
        addToCartBtn.setAttribute('data-item-custom2-value', frameName);
        addToCartBtn.setAttribute('data-item-custom3-name', 'Artist');
        addToCartBtn.setAttribute('data-item-custom3-value', currentProduct.artist);
        
        console.log('âœ… Product configured for Snipcart:', {
          id: uniqueId,
          name: currentProduct.title + ' (' + sizeName + ')',
          price: totalPrice.toFixed(2),
          description: `${currentProduct.title} by ${currentProduct.artist}`,
          image: currentProduct.image
        });
      } else {
        // Hide price and disable button
        priceDisplay.style.display = 'none';
        addToCartBtn.disabled = true;
        addToCartBtn.className = 'add-to-cart-btn'; // Remove snipcart class
        addToCartBtn.textContent = 'Select options above';
        
        // Remove Snipcart attributes
        const attrs = ['data-item-id', 'data-item-name', 'data-item-price', 'data-item-url', 'data-item-description', 'data-item-image', 'data-item-custom1-name', 'data-item-custom1-value', 'data-item-custom2-name', 'data-item-custom2-value', 'data-item-custom3-name', 'data-item-custom3-value'];
        attrs.forEach(attr => addToCartBtn.removeAttribute(attr));
      }
    }

    // ============================================
    // UI HELPERS
    // Toggle details, lightbox, etc.
    // ============================================
    
    /**
     * Toggle the item details dropdown
     */
    function toggleDetails() {
      const content = document.getElementById('detailsContent');
      const arrow = document.getElementById('detailsArrow');
      
      if (content.classList.contains('expanded')) {
        content.classList.remove('expanded');
        arrow.textContent = 'â–¼';
      } else {
        content.classList.add('expanded');
        arrow.textContent = 'â–²';
      }
    }

    /**
     * Open the full-screen image lightbox
     */
    function openImageLightbox() {
      if (!currentProduct) return;
      
      const lightbox = document.getElementById('imageLightbox');
      const lightboxImage = document.getElementById('lightboxImage');
      
      lightboxImage.src = currentProduct.highResImage || currentProduct.image;
      lightboxImage.alt = currentProduct.title;
      lightbox.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    /**
     * Close the image lightbox
     * @param {Event} event - Click event (optional)
     */
    function closeImageLightbox(event) {
      if (event && event.target !== document.getElementById('imageLightbox') && event.target.className !== 'lightbox-close') {
        return;
      }
      
      const lightbox = document.getElementById('imageLightbox');
      lightbox.classList.remove('active');
      document.body.style.overflow = '';
    }

    // ============================================
    // IMAGE URL OPTIMIZATION
    // Use Smithsonian IIIF for faster loading
    // ============================================
    
    /**
     * Optimize image URL for faster loading
     * Adds max size parameter to Smithsonian IIIF URLs
     * @param {string} imageUrl - Original image URL
     * @param {number} maxSize - Maximum dimension (default 400)
     * @returns {string} Optimized URL
     */
    function optimizeImageUrl(imageUrl, maxSize = 400) {
      if (!imageUrl) return '';
      
      if (imageUrl.includes('ids.si.edu/ids/deliveryService')) {
        const separator = imageUrl.includes('?') ? '&' : '?';
        return `${imageUrl}${separator}max=${maxSize}`;
      }
      
      return imageUrl;
    }

    /**
     * Extract optimized image URL from Smithsonian API response
     * Searches through various possible locations for image data
     * @param {Object} descriptive - descriptiveNonRepeating object from API
     * @param {number} size - Target image size (default 400)
     * @returns {string|null} Image URL or null if not found
     */
    function extractOptimizedImage(descriptive, size = 400) {
      if (!descriptive || !descriptive.online_media) return null;
      
      let online_media = [];
      if (Array.isArray(descriptive.online_media)) {
        online_media = descriptive.online_media;
      } else if (descriptive.online_media.media) {
        online_media = descriptive.online_media.media;
      } else {
        online_media = [descriptive.online_media];
      }
      
      for (const mediaItem of online_media) {
        if (mediaItem.thumbnail && mediaItem.thumbnail.includes("http")) {
          return optimizeImageUrl(mediaItem.thumbnail, size);
        }
        if (mediaItem.idsid && mediaItem.idsid.includes("http")) {
          return optimizeImageUrl(mediaItem.idsid, size);
        }
        if (mediaItem.content && mediaItem.content.includes("http")) {
          return optimizeImageUrl(mediaItem.content, size);
        }
        if (mediaItem.media && Array.isArray(mediaItem.media)) {
          for (const media of mediaItem.media) {
            if (media.thumbnail && media.thumbnail.includes("http")) {
              return optimizeImageUrl(media.thumbnail, size);
            }
            if (media.idsid && media.idsid.includes("http")) {
              return optimizeImageUrl(media.idsid, size);
            }
            if (media.content && media.content.includes("http")) {
              return optimizeImageUrl(media.content, size);
            }
          }
        }
      }
      return null;
    }

    // ============================================
    // SEARCH HELPERS
    // ============================================
    
    /**
     * Fill search input from artist dropdown selection
     * Handles "clear" option to reset search
     */
    function fillSearchFromArtist() {
      const artistSelect = document.getElementById("artistSelect");
      const searchQuery = document.getElementById("searchQuery");
      const selectedValue = artistSelect.value;
      
      if (selectedValue === "clear") {
        searchQuery.value = "";
        artistSelect.selectedIndex = 0;
      } else if (selectedValue) {
        searchQuery.value = selectedValue;
      }
      
      // Auto-trigger search
      fetchArtworks();
    }

    /**
     * Get current search term from input
     * @returns {string} Search term or "american art" if empty
     */
    function getSearchTerm() {
      const searchQuery = document.getElementById("searchQuery").value.trim();
      return searchQuery || "american art";
    }

    /**
     * Extract content from various API response formats
     * @param {*} data - API response data (array, object, or string)
     * @returns {string} Extracted content string
     */
    function extractContent(data) {
      if (!data) return "";
      if (Array.isArray(data)) return data[0]?.content || data[0] || "";
      return data.content || data.toString();
    }

    // ============================================
    // API / DATA FETCHING
    // Fetch artwork from Smithsonian Open Access API
    // ============================================
    
    /**
     * Fetch artworks from Smithsonian API
     * - Debounced (300ms) to prevent rapid API calls
     * - Filters by SAAM collection and CC0 license
     * - Processes results and displays cards
     * 
     * BUG: artworkCounter resets to 0 on each search,
     * creating non-unique product IDs!
     */
    async function fetchArtworks() {
      // Debounce search input
      if (searchTimeout) {
        clearTimeout(searchTimeout);
      }
      
      searchTimeout = setTimeout(async () => {
        const maxItems = parseInt(document.getElementById("maxItems").value) || 20;
        const searchTerm = getSearchTerm();
        
        currentSearchTerm = searchTerm;
        const statusElement = document.getElementById("status");
        const galleryElement = document.getElementById("gallery");
        const statsElement = document.getElementById("stats");
        
        // Reset state
        artworksData = [];
        artworkCounter = 0;  // BUG: This causes non-unique IDs!
        galleryElement.innerHTML = "";
        statsElement.style.display = "none";
        updateStats();
        
        statusElement.innerHTML = `<div class="loading"></div>Searching for "${searchTerm}"...`;
        
        try {
          // Build query: SAAM collection + CC0 license + search term
          let query = `unit_code:SAAM AND media_usage:CC0`;
          
          if (searchTerm && searchTerm !== "american art") {
            query += ` AND (${searchTerm})`;
          }
          
          const params = new URLSearchParams({
            api_key: API_KEY,
            q: query,
            rows: Math.min(maxItems * 2, 100),  // Request extra to account for filtering
            start: 0,
            sort: "relevancy"
          });
          
          const response = await fetch(`${BASE_URL}?${params}`);
          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }
          
          const data = await response.json();
          
          if (!data.response || !data.response.rows || data.response.rows.length === 0) {
            statusElement.textContent = `No artworks found for "${searchTerm}". Try a different search.`;
            galleryElement.innerHTML = `
              <div class="empty-state">
                <h3>No artworks found</h3>
                <p>Try a different search term or select an artist from the dropdown.</p>
              </div>
            `;
            return;
          }
          
          statusElement.innerHTML = `<div class="loading"></div>Loading ${data.response.rows.length} results...`;
          
          let processedCount = 0;
          let successCount = 0;
          
          // Process each result
          for (const item of data.response.rows) {
            if (successCount >= maxItems) break;
            
            try {
              const content = item.content || {};
              const descriptive = content.descriptiveNonRepeating || {};
              const indexed = content.indexedStructured || {};
              const freetext = content.freetext || {};
              
              // Skip items without images
              const imageUrl = extractOptimizedImage(descriptive, 400);
              if (!imageUrl) continue;
              
              // Extract metadata
              const title = extractContent(descriptive.title) || "Untitled";
              const artist = extractContent(indexed.name || freetext.name) || "Unknown Artist";
              const date = extractContent(indexed.date || freetext.date) || "";
              const medium = extractContent(freetext.physicalDescription) || "Mixed Media";
              
              // Create artwork object
              const artwork = {
                id: `artwork_${artworkCounter++}`,  // BUG: Non-unique across searches!
                title: title,
                artist: artist,
                year_created: date,
                medium: medium,
                image: imageUrl,
                highResImage: extractOptimizedImage(descriptive, 800),
                museum: "Smithsonian American Art Museum",
                location: "Washington, DC",
                description: extractContent(freetext.notes || freetext.summary) || `Museum quality print of ${title} by ${artist}`,
                accession_number: descriptive.record_ID,
                api_url: `https://collections.si.edu/search/detail/edanmdm:${item.id}`,
                smithsonian_id: item.id || `si_${Date.now()}_${Math.random().toString(36).substr(2, 5)}`,
                object_type: extractContent(indexed.object_type) || "Artwork",
                dimensions: extractContent(freetext.dimensions) || "",
                credit_line: extractContent(freetext.creditLine) || "",
                created_date: new Date().toISOString()
              };
              
              artworksData.push(artwork);
              displayArtwork(artwork);
              successCount++;
              
            } catch (error) {
              console.error(`Error processing artwork:`, error);
            }
            
            processedCount++;
          }
          
          if (successCount > 0) {
            statusElement.textContent = `Found ${successCount} artworks for "${searchTerm}" - All available as museum-quality prints`;
            statsElement.style.display = "block";
            updateStats();
          } else {
            statusElement.textContent = `No suitable artworks found for "${searchTerm}".`;
            galleryElement.innerHTML = `
              <div class="empty-state">
                <h3>No artworks found</h3>
                <p>Try a different search term or select an artist from the dropdown.</p>
              </div>
            `;
          }
          
        } catch (error) {
          console.error("Error in fetchArtworks:", error);
          statusElement.textContent = `Error searching: ${error.message}`;
          galleryElement.innerHTML = `
            <div class="empty-state">
              <h3>Error loading artworks</h3>
              <p>Please try again.</p>
            </div>
          `;
          statsElement.style.display = "none";
        }
      }, 300); // 300ms debounce
    }

    // ============================================
    // RENDERING
    // Create and display product cards
    // ============================================
    
    /**
     * Display a single artwork as a product card
     * @param {Object} artwork - The artwork object to display
     */
    function displayArtwork(artwork) {
      const galleryElement = document.getElementById("gallery");
      
      const card = document.createElement("div");
      card.className = "product-card";
      card.id = artwork.id;
      
      card.innerHTML = `
        <div class="product-image-container" onclick="window.location.hash = 'product/${artwork.id}'">
          <img src="${artwork.image}" alt="${artwork.title}" class="product-image" loading="lazy">
          <div class="museum-badge">Smithsonian</div>
          <button class="favorite-btn" onclick="event.stopPropagation();">â™¡</button>
        </div>
        
        <div class="product-info">
          <h3 class="product-title" onclick="window.location.hash = 'product/${artwork.id}'">${artwork.title}</h3>
          <p class="product-artist">by ${artwork.artist}</p>
          
          <div class="product-rating">
            <span class="stars">â˜…â˜…â˜…â˜…â˜…</span>
            <span class="rating-count">(607)</span>
          </div>
          
          <div class="product-pricing">
            <span class="current-price">$49.99</span>
            <span class="original-price">$66.65</span>
            <span class="discount">25% off</span>
          </div>
          
          <button class="quick-add" onclick="window.location.hash = 'product/${artwork.id}'">
            View Options
          </button>
        </div>
      `;
      
      galleryElement.appendChild(card);
    }

    /**
     * Update the stats display with current card count
     */
    function updateStats() {
      const totalCount = document.getElementById("totalCount");
      const currentDisplayed = document.querySelectorAll(".product-card").length;
      
      if (totalCount) totalCount.textContent = currentDisplayed;
    }

    // ============================================
    // EVENT HANDLERS
    // ============================================
    
    // Close lightbox with Escape key
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        closeImageLightbox();
      }
    });

    // ============================================
    // INITIALIZATION
    // ============================================
    
    /**
     * Initialize app in clean state
     * - Show shop page
     * - Hide product page
     * - Clear hash
     */
    function initializeCleanState() {
      // Ensure we start on shop page
      document.getElementById('shopPage').classList.remove('hidden');
      document.getElementById('productPage').classList.remove('active');
      document.getElementById('breadcrumbNav').style.display = 'none';
      
      // Clear any hash
      if (window.location.hash) {
        window.location.hash = '';
      }
      
      // Reset current product
      currentProduct = null;
      
      console.log('ðŸ§¹ Page initialized in clean state');
    }

    /**
     * Main initialization on DOM ready
     * - Initialize clean state
     * - Set up router
     * - Load Georgia O'Keeffe as default
     */
    document.addEventListener('DOMContentLoaded', function() {
      initializeCleanState();
      initRouter();
      
      // Set Georgia O'Keeffe as default artist
      const artistSelect = document.getElementById('artistSelect');
      const searchQuery = document.getElementById('searchQuery');
      if (artistSelect) artistSelect.value = "Georgia O'Keeffe";
      if (searchQuery) searchQuery.value = "Georgia O'Keeffe";
      
      // Load artwork on page load
      fetchArtworks();
      
      console.log('ðŸ”¥ Smithsonian store loaded with Georgia O\'Keeffe');
    });

    // ============================================
    // SNIPCART EVENT DEBUGGING
    // Logs all Snipcart events to console
    // ============================================
    document.addEventListener('snipcart.ready', function() {
      console.log('âœ… Snipcart is ready and working!');
      
      // Event logging
      const events = [
        'snipcart.initialized',
        'item.added',
        'item.removed',
        'cart.opened',
        'cart.closed',
        'cart.confirmed',
        'checkout.started',
        'checkout.step.changed',
        'checkout.payment.method.changed',
        'checkout.confirm',
        'checkout.cancelled',
        'checkout.error',
        'order.completed',
        'snipcart.error'
      ];
      
      events.forEach(eventName => {
        Snipcart.events.on(eventName, function(data) {
          console.log(`ðŸ“‹ ${eventName}:`, data || 'triggered');
        });
      });
      
      console.log('ðŸ”§ All Snipcart event listeners attached');
    });
  </script>
</body>
</html>
